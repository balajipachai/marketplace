<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>

    <center> <h3 id="centerDiv">Add Incident</h3></center>
    <label id="failureMessage"> {{error}}</label>
    <div class="container" id="FormBox">
        <form method="post" action="/api/incident">

            {{!-- Organization dropdown --}}
            <div>
                <label for="organization">Submitter Node:</label>
                <input type="text" id="organization" name="organisationId" value={{data.loginUser.code}} readonly>
            </div>
            {{!-- organization_reference --}}
            <div>
                <label for="organization_reference">Submitter Case Reference:</label>
                <input type="text" id="fname" name="organisationReference" placeholder="Enter case reference number">
            </div>
            <div>
                <label for="timestamp"> Parent Incident ID:</label>
                <input type="text" id="pname" name="parentId" value={{data.parentId}}>
            </div>
            {{!-- crime dropdown --}}
            <div>
                <label for="crime">Incident type:</label>
                <select id="crime" name="crimeId">
                    {{#each data.crime}}
                    <option value={{this.code}}>{{this.type}}</option>
                    {{/each}}
                </select>
            </div>
            {{!-- severity dropdown --}}
            <div>
                <label for="severity">Severity:</label>
                <select id="severity" name="severityId">
                    {{#each data.severity}}
                    <option value={{this.code}}>{{this.type}}</option>
                    {{/each}}
                </select>
            </div>
            {{!-- venue dropdown --}}
            <div>
                <label for="venues">Venue:</label>
                <select id="venues" name="venueId">
                    {{#each data.venues}}
                    <option value={{this.code}}>{{this.type}}</option>
                    {{/each}}
                </select>
            </div>
            {{!-- Location --}}
            <div>
                <label for="location">Location:</label>
                <input type="text" id="location" name="location" value = {{data.location}}>
            </div>
            {{!-- timestamp --}}
            <div>
                <label for="timestamp">Incident occurred on:</label>
                <input type="date" id="timestamp" name="timestamp" value={{data.timestamp}}>
            </div>

            <div>
                <label for="timestamp"> Incident reported on:</label>
                <input type="date" id="timestamp" name="reportedat" value={{data.reportedAt}}>
            </div>
            {{!-- reported at --}}
            {{!-- <label for="reportedAt">Reported At</label>
            <input type="datetime-local" id="reportedAt" name="reportedAt"> --}}


            {{!-- Organization dropdown --}}
            <div>
                <label for="organization">Child</label>
                <select id="organization" name="childId">
                    {{#each data.organizations}}
                    <option value={{this.id}}>{{this.organisationName}}</option>
                    {{/each}}
                </select>
            </div>
            {{!-- child Instructions --}}

            <div id='TextBoxesGroup'>
                            <label for="child">Instructions for child</label>

                <div id="TextBoxDiv1">
                    <input type='textarea' name='instructions' placeholder="Enter instructions for child"
                        style="height:100px; width:100%">
                </div>
            </div>
            {{!-- <input type='button' value='Add Button' id='addButton'>
            <input type='button' value='Remove Button' id='removeButton'> --}}

            {{!--
            <label for="subject">Subject</label>
            <textarea id="subject" name="subject" placeholder="Write something.." style="height:200px"></textarea> --}}
            <div>
                <input type="submit" value="Submit">
            </div>
        </form>
    </div>
    <script type="text/javascript" src="../../jquery-1.3.2.min.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            var counter = 2;

            $("#addButton").click(function () {

                if (counter > 10) {
                    alert("Only 10 textboxes allow");
                    return false;
                }

                var newTextBoxDiv = $(document.createElement('div'))
                    .attr("id", 'TextBoxDiv' + counter);

                newTextBoxDiv.after().html('<label>Child #' + counter + ' : </label>' +
                    '<input type="textarea" name="child' + counter +
                    '" id="child' + counter + 'placeholder="Instruction for child.." style="height:100px; width: 100%"' + '" value="" >');

                newTextBoxDiv.appendTo("#TextBoxesGroup");


                counter++;
            });

            $("#removeButton").click(function () {
                if (counter == 1) {
                    alert("No more textbox to remove");
                    return false;
                }

                counter--;

                $("#TextBoxDiv" + counter).remove();

            });

        });
    </script>
</body>

</html>